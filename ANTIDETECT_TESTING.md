# –°–∏—Å—Ç–µ–º–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∞–Ω—Ç–∏–¥–µ—Ç–µ–∫—Ç —Å—Ç—Ä–∞—Ç–µ–≥–∏–π

## ‚úÖ –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

### –ù–æ–≤–∞—è –∫–æ–º–∞–Ω–¥–∞ `/test_antidetect`

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ç–µ—Å—Ç–∏—Ä—É–µ—Ç 7 —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Å—Ç—Ä–∞—Ç–µ–≥–∏–π –æ–±—Ö–æ–¥–∞ –∑–∞—â–∏—Ç—ã –æ—Ç –±–æ—Ç–æ–≤ –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–∫—Ä–∏–Ω—à–æ—Ç—ã + —Å—Ç–∞—Ç—É—Å –∫–∞–∂–¥–æ–π –≤ Telegram.

## üéØ 7 –°—Ç—Ä–∞—Ç–µ–≥–∏–π –æ–±—Ö–æ–¥–∞ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫

1. **Basic Stealth** - –ë–∞–∑–æ–≤—ã–π: —É–±—Ä–∞—Ç—å webdriver, –¥–æ–±–∞–≤–∏—Ç—å plugins
2. **GitHub Parser** - –ò–∑ —É—Å–ø–µ—à–Ω–æ–≥–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è (ignore_https_errors, java_script)  
3. **Full Stealth** - –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –Ω–∞–±–æ—Ä (chrome runtime, languages, hardware)
4. **Random Fingerprint** - –°–ª—É—á–∞–π–Ω—ã–µ UA –∏ viewport
5. **Mobile Emulation** - –ü—Ä–∏—Ç–≤–æ—Ä—è–µ–º—Å—è Android —Ç–µ–ª–µ—Ñ–æ–Ω–æ–º
6. **Extended Headers** - HTTP –∑–∞–≥–æ–ª–æ–≤–∫–∏ (sec-ch-ua, Accept-Language)
7. **Canvas Protection** - –ó–∞—â–∏—Ç–∞ –æ—Ç Canvas/WebGL fingerprinting

## üì± –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```
/test_antidetect
```

**–ë–æ—Ç –æ—Ç–≤–µ—Ç–∏—Ç:**
```
üß™ –ó–∞–ø—É—Å–∫–∞—é —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–Ω—Ç–∏–¥–µ—Ç–µ–∫—Ç —Å—Ç—Ä–∞—Ç–µ–≥–∏–π...
–≠—Ç–æ –∑–∞–π–º–µ—Ç 1-2 –º–∏–Ω—É—Ç—ã.
–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É—é 7 —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –º–µ—Ç–æ–¥–æ–≤ –æ–±—Ö–æ–¥–∞ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫.
```

–ó–∞—Ç–µ–º –¥–ª—è –∫–∞–∂–¥–æ–π —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏:
- –û—Ç–∫—Ä–æ–µ—Ç https://www.ozon.ru
- –°–¥–µ–ª–∞–µ—Ç —Å–∫—Ä–∏–Ω—à–æ—Ç
- –ü—Ä–æ–≤–µ—Ä–∏—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∫—É
- –û—Ç–ø—Ä–∞–≤–∏—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç

**–ü—Ä–∏–º–µ—Ä —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞:**
```
[–°–∫—Ä–∏–Ω—à–æ—Ç]

üß™ –¢–µ—Å—Ç #2: GitHub Parser
–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–∑ –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω–æ–≥–æ –ø–∞—Ä—Å–µ—Ä–∞

‚úÖ –£—Å–ø–µ—Ö! Title: Ozon ‚Äî –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞–≥–∞–∑–∏–Ω
```

–∏–ª–∏

```
[–°–∫—Ä–∏–Ω—à–æ—Ç]

üß™ –¢–µ—Å—Ç #1: Basic Stealth
–ë–∞–∑–æ–≤—ã–π stealth

‚ùå –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞: '–î–æ—Å—Ç—É–ø –æ–≥—Ä–∞–Ω–∏—á–µ–Ω'
```

**–í –∫–æ–Ω—Ü–µ:**
```
‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ!

–†–µ–∑—É–ª—å—Ç–∞—Ç—ã:
‚ùå Strategy #1: Basic Stealth
‚úÖ Strategy #2: GitHub Parser
‚ùå Strategy #3: Full Stealth
...

üí° –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏, –æ—Ç–º–µ—á–µ–Ω–Ω—ã–µ ‚úÖ
```

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –§–∞–π–ª—ã

**antidetect_strategies.py** - –ú–æ–¥—É–ª—å —Å–æ —Å—Ç—Ä–∞—Ç–µ–≥–∏—è–º–∏:
- 7 –∫–ª–∞—Å—Å–æ–≤ —Å—Ç—Ä–∞—Ç–µ–≥–∏–π
- `StrategyTester` –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- –ú–µ—Ç–æ–¥—ã `apply()` –∏ `test_strategy()`

**test_antidetect.py** - –°–∫—Ä–∏–ø—Ç –∑–∞–ø—É—Å–∫–∞ —Ç–µ—Å—Ç–æ–≤:
- –ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∫–∞–∫ subprocess –∏–∑ –±–æ—Ç–∞
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç Playwright sync API
- –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ–±—Ä–∞—Ç–Ω–æ –≤ Telegram

**telegram_bot.py** - –ö–æ–º–∞–Ω–¥–∞ `/test_antidetect`:
- –ó–∞–ø—É—Å–∫–∞–µ—Ç test_antidetect.py
- –ü—Ä–∏–Ω–∏–º–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
- –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–∫—Ä–∏–Ω—à–æ—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é

### –ö–ª—é—á–µ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–∑ GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

–°—Ç—Ä–∞—Ç–µ–≥–∏—è #2 –æ—Å–Ω–æ–≤–∞–Ω–∞ –Ω–∞ —É—Å–ø–µ—à–Ω–æ–º –ø–∞—Ä—Å–µ—Ä–µ aglihowstan/parser_ozon:

```python
context = browser.new_context(
    viewport={'width': 1920, 'height': 1080},
    user_agent='Mozilla/5.0 ... Chrome/120.0.0.0 ...',
    java_script_enabled=True,        # ‚Üê –í–∞–∂–Ω–æ!
    ignore_https_errors=True          # ‚Üê –í–∞–∂–Ω–æ!
)

context.add_init_script("""
    Object.defineProperty(navigator, 'webdriver', {
        get: () => undefined
    });
    Object.defineProperty(navigator, 'plugins', {
        get: () => [1, 2, 3, 4, 5]
    });
""")
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏

```python
# –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã:
- "–î–æ—Å—Ç—É–ø –æ–≥—Ä–∞–Ω–∏—á–µ–Ω" –≤ content
- "Access Denied" –≤ content
- "–ü—Ä–æ–≤–µ—Ä–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏"
- "Captcha" / "captcha"
- "Ozon" –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤ title
```

## üöÄ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

```bash
# –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤
scp antidetect_strategies.py test_antidetect.py telegram_bot.py ozon@85.193.81.13:~/ozon_parser/

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –±–æ—Ç–∞
ssh ozon@85.193.81.13 "cd ~/ozon_parser && ./stop_telegram_bot.sh && ./start_telegram_bot.sh"
```

**–°—Ç–∞—Ç—É—Å:**
- ‚úÖ –†–∞–∑–≤–µ—Ä–Ω—É—Ç–æ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ 85.193.81.13
- ‚úÖ –ë–æ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç: PID 132180
- ‚úÖ –ö–æ–º–∞–Ω–¥–∞ `/test_antidetect` –¥–æ—Å—Ç—É–ø–Ω–∞

## üìä –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

–ü–æ—Å–ª–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –º—ã —É–∑–Ω–∞–µ–º:
1. –ö–∞–∫–∏–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –Ω–∞ —É–¥–∞–ª–µ–Ω–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ
2. –ö–∞–∫–∞—è –∑–∞—â–∏—Ç–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Ozon
3. –û–ø—Ç–∏–º–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –æ–±—Ö–æ–¥–∞

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. –ó–∞–ø—É—Å—Ç–∏—Ç—å `/test_antidetect` –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
2. –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
3. –í—ã–±—Ä–∞—Ç—å —Ä–∞–±–æ—á—É—é —Å—Ç—Ä–∞—Ç–µ–≥–∏—é
4. –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –≤ `session_manager.py`
5. –î–æ–±–∞–≤–∏—Ç—å –≤ `config.py` –ø–∞—Ä–∞–º–µ—Ç—Ä `DEFAULT_STRATEGY`
6. –û–±–Ω–æ–≤–∏—Ç—å –æ—Å–Ω–æ–≤–Ω–æ–π –ø–∞—Ä—Å–µ—Ä

## üí° –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

–ü–æ—Å–ª–µ –Ω–∞—Ö–æ–∂–¥–µ–Ω–∏—è —Ä–∞–±–æ—á–µ–π —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏:

```python
# session_manager.py
def create_browser_context(self, browser, strategy_num=2):
    tester = StrategyTester()
    strategy = tester.get_strategy_by_index(strategy_num)
    return strategy.apply(browser)
```

```python
# config.py
ANTIDETECT_STRATEGY = 2  # GitHub Parser
```

## üîç –û—Ç–ª–∞–¥–∫–∞

**–õ–æ–≥–∏ –±–æ—Ç–∞:**
```bash
ssh ozon@85.193.81.13 "tail -f ~/ozon_parser/logs/telegram_bot.log"
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç—Ä–∞—Ç–µ–≥–∏–π –ª–æ–∫–∞–ª—å–Ω–æ:**
```python
from antidetect_strategies import StrategyTester
from playwright.sync_api import sync_playwright

with sync_playwright() as p:
    browser = p.chromium.launch()
    tester = StrategyTester()
    
    for strategy in tester.get_all_strategies():
        success, msg, screenshot = tester.test_strategy(browser, strategy)
        print(f"{strategy.name}: {msg}")
```

## üìù –ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞ (–æ–±–Ω–æ–≤–ª–µ–Ω–æ)

```
/start          - üè† –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
/parse          - üöÄ –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø–∞—Ä—Å–∏–Ω–≥
/stop           - ‚èπÔ∏è –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–∞—Ä—Å–∏–Ω–≥
/test_antidetect - üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–Ω—Ç–∏–¥–µ—Ç–µ–∫—Ç–∞ (–ù–û–í–û–ï!)
/cron_on        - ‚è∞ –í–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫
/cron_off       - ‚è∏Ô∏è –û—Ç–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫
/cron_status    - üìã –°—Ç–∞—Ç—É—Å –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫–∞
/status         - üìä –°—Ç–∞—Ç—É—Å –ø–∞—Ä—Å–µ—Ä–∞
/help           - ‚ùì –°–ø—Ä–∞–≤–∫–∞
```

–í—Å–µ –≥–æ—Ç–æ–≤–æ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é! üéâ
