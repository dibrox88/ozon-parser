# üç™ –ü—Ä–æ–±–ª–µ–º–∞ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ cookies - –†–ï–®–ï–ù–û

## ‚ùì –í–æ–ø—Ä–æ—Å:
–£ –Ω–∞—Å 14-16 cookies –≤ —Ñ–∞–π–ª–µ, –Ω–µ –¥–æ–ª–∂–Ω—ã –ª–∏ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å—Å—è —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ–¥–Ω–∏–µ?

## ‚úÖ –†–µ—à–µ–Ω–∏–µ:

### –ü—Ä–æ–±–ª–µ–º–∞:
Playwright –ø—Ä–∏ —ç–∫—Å–ø–æ—Ä—Ç–µ cookies –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç **–≤—Å–µ –≤–µ—Ä—Å–∏–∏** –∫–∞–∂–¥–æ–π cookie –¥–ª—è —Ä–∞–∑–Ω—ã—Ö:
- –î–æ–º–µ–Ω–æ–≤ (`.ozon.ru` vs `.ozone.ru`)
- –ü—É—Ç–µ–π (`/` vs `/my/orders`)
- –ö–æ–Ω—Ç–µ–∫—Å—Ç–æ–≤ (—Å `partitionKey` –∏ –±–µ–∑)

–ù–∞–ø—Ä–∏–º–µ—Ä, `abt_data` –±—ã–ª–∞ **–¥–≤–∞–∂–¥—ã**:
1. `.ozone.ru` - expires 1793483890
2. `.ozon.ru` - expires 1793483930 (—Å–≤–µ–∂–µ–µ)

### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:

–í `export_cookies.py` –¥–æ–±–∞–≤–ª–µ–Ω–∞ **–¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è**:
```python
# –£–¥–∞–ª—è–µ–º –¥—É–±–ª–∏–∫–∞—Ç—ã - –æ—Å—Ç–∞–≤–ª—è–µ–º —Å–∞–º—É—é —Å–≤–µ–∂—É—é –≤–µ—Ä—Å–∏—é
unique_cookies = {}
for cookie in cookies:
    name = cookie.get('name', '')
    expires = cookie.get('expires', -1)
    
    if name in unique_cookies:
        existing_expires = unique_cookies[name].get('expires', -1)
        # –û—Å—Ç–∞–≤–ª—è–µ–º —Ç—É, —á—Ç–æ –∏—Å—Ç–µ–∫–∞–µ—Ç –ø–æ–∑–∂–µ (–±–æ–ª–µ–µ —Å–≤–µ–∂–∞—è)
        if expires > existing_expires:
            unique_cookies[name] = cookie
    else:
        unique_cookies[name] = cookie

cookies = list(unique_cookies.values())
```

### –†–µ–∑—É–ª—å—Ç–∞—Ç:

**–î–æ:** 14 cookies (—Å –¥—É–±–ª–∏–∫–∞—Ç–æ–º `abt_data`)
**–ü–æ—Å–ª–µ:** 13 cookies (—É–Ω–∏–∫–∞–ª—å–Ω—ã–µ, —Å–∞–º—ã–µ —Å–≤–µ–∂–∏–µ)

‚úÖ –ü—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–º —ç–∫—Å–ø–æ—Ä—Ç–µ cookies –±—É–¥–µ—Ç —Å–æ—Ö—Ä–∞–Ω—è—Ç—å—Å—è —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ–¥–Ω—è—è –≤–µ—Ä—Å–∏—è –∫–∞–∂–¥–æ–π.

## üîß –ü—Ä–æ–≤–µ—Ä–∫–∞:

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥—É–±–ª–∏–∫–∞—Ç—ã –≤ —Ç–µ–∫—É—â–∏—Ö cookies
python check_cookies.py

# –¢–µ—Å—Ç –ª–æ–≥–∏–∫–∏ –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏–∏
python test_dedup_cookies.py
```

## üìù –°–ª–µ–¥—É—é—â–∏–π —Ä–∞–∑:

–ü—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ cookies —á–µ—Ä–µ–∑ `python export_cookies.py`:
- –ë—É–¥–µ—Ç –ø–æ–∫–∞–∑–∞–Ω–æ: "üì¶ –ü–æ–ª—É—á–µ–Ω–æ X cookies –∏–∑ –±—Ä–∞—É–∑–µ—Ä–∞"
- –ë—É–¥–µ—Ç –ø–æ–∫–∞–∑–∞–Ω–æ: "‚úÖ –£–Ω–∏–∫–∞–ª—å–Ω—ã—Ö cookies: Y"
- –ï—Å–ª–∏ X ‚â† Y, –∑–Ω–∞—á–∏—Ç –±—ã–ª–∏ –¥—É–±–ª–∏–∫–∞—Ç—ã –∏ –æ–Ω–∏ —É–¥–∞–ª–µ–Ω—ã

–≠—Ç–æ **–Ω–æ—Ä–º–∞–ª—å–Ω–æ** –∏ **–ø—Ä–∞–≤–∏–ª—å–Ω–æ** - —Ç–∞–∫ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å!
