# –ü–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Å–∏—Å—Ç–µ–º—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –æ–±—Ö–æ–¥–∞ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫ Ozon

## üéØ –¶–µ–ª—å
–°–æ–∑–¥–∞—Ç—å —Å–∏—Å—Ç–µ–º—É –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –º–µ—Ç–æ–¥–æ–≤ –æ–±—Ö–æ–¥–∞ –∑–∞—â–∏—Ç—ã –æ—Ç –±–æ—Ç–æ–≤ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ —Å –æ—Ç–ø—Ä–∞–≤–∫–æ–π —Å–∫—Ä–∏–Ω—à–æ—Ç–æ–≤ –≤ Telegram.

## üìã –ó–∞–¥–∞—á–∏

### 1. –°–æ–∑–¥–∞—Ç—å –º–æ–¥—É–ª—å —Å–æ —Å—Ç—Ä–∞—Ç–µ–≥–∏—è–º–∏ antidetect (`antidetect_strategies.py`)

**7 —Å—Ç—Ä–∞—Ç–µ–≥–∏–π –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:**

1. **Basic Stealth** - –ë–∞–∑–æ–≤—ã–π: —É–±—Ä–∞—Ç—å webdriver, –¥–æ–±–∞–≤–∏—Ç—å plugins
2. **GitHub Parser** - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–∑ –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω–æ–≥–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è aglihowstan/parser_ozon
3. **Full Stealth** - –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –Ω–∞–±–æ—Ä: webdriver, plugins, permissions, canvas, webgl, chrome runtime
4. **Random Fingerprint** - –°–ª—É—á–∞–π–Ω—ã–µ UA, viewport, timezone
5. **Mobile Emulation** - –≠–º—É–ª—è—Ü–∏—è Android —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
6. **Extended Headers** - –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ HTTP –∑–∞–≥–æ–ª–æ–≤–∫–∏ (sec-ch-ua, Accept-Language, etc)
7. **Canvas Protection** - –ó–∞—â–∏—Ç–∞ –æ—Ç Canvas fingerprinting —Å –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º —à—É–º–∞

**–ö–ª—é—á–µ–≤—ã–µ –º–µ—Ç–æ–¥—ã –∏–∑ GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è:**
```python
# –ò–∑ aglihowstan/parser_ozon:
- ignore_https_errors=True
- java_script_enabled=True
- –ü—Ä–æ—Å—Ç–æ–π init_script —Ç–æ–ª—å–∫–æ —Å webdriver –∏ plugins
- User-Agent: Chrome/120.0.0.0
```

### 2. –î–æ–±–∞–≤–∏—Ç—å –∫–æ–º–∞–Ω–¥—É `/test_antidetect` –≤ Telegram –±–æ—Ç–∞

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:**
- –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–∞ –≤—Å–µ—Ö —Å—Ç—Ä–∞—Ç–µ–≥–∏–π –ø–æ –æ—á–µ—Ä–µ–¥–∏
- –î–ª—è –∫–∞–∂–¥–æ–π —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏:
  - –ü—Ä–∏–º–µ–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
  - –û—Ç–∫—Ä—ã—Ç—å https://www.ozon.ru
  - –°–¥–µ–ª–∞—Ç—å —Å–∫—Ä–∏–Ω—à–æ—Ç
  - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –±–ª–æ–∫–∏—Ä–æ–≤–∫—É
  - –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–∫—Ä–∏–Ω—à–æ—Ç + —Å—Ç–∞—Ç—É—Å –≤ Telegram

**–°–æ–æ–±—â–µ–Ω–∏–µ –≤ Telegram:**
```
üß™ –¢–µ—Å—Ç #1: Basic Stealth
–ë–∞–∑–æ–≤—ã–π stealth: —É–±–∏—Ä–∞–µ–º webdriver, –¥–æ–±–∞–≤–ª—è–µ–º –ø–ª–∞–≥–∏–Ω—ã

[–°–∫—Ä–∏–Ω—à–æ—Ç]

‚ùå –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞: "–î–æ—Å—Ç—É–ø –æ–≥—Ä–∞–Ω–∏—á–µ–Ω"
–∏–ª–∏
‚úÖ –£—Å–ø–µ—Ö! Title: Ozon ‚Äî –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞–≥–∞–∑–∏–Ω
```

### 3. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –æ—Å–Ω–æ–≤–Ω—ã–º –ø–∞—Ä—Å–µ—Ä–æ–º

**–ü–æ—Å–ª–µ –Ω–∞—Ö–æ–∂–¥–µ–Ω–∏—è —Ä–∞–±–æ—á–µ–π —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏:**
- –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–æ–º–µ—Ä —É—Å–ø–µ—à–Ω–æ–π —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –≤ config.py
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –µ—ë –≤ session_manager.py –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
- –î–æ–±–∞–≤–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä `--strategy N` –¥–ª—è —Ä—É—á–Ω–æ–≥–æ –≤—ã–±–æ—Ä–∞

### 4. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–æ—Ç–∞—Ü–∏—è —Å—Ç—Ä–∞—Ç–µ–≥–∏–π

**–ü—Ä–∏ –±–ª–æ–∫–∏—Ä–æ–≤–∫–µ:**
- –ï—Å–ª–∏ —Ç–µ–∫—É—â–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å—Å—è –Ω–∞ —Å–ª–µ–¥—É—é—â—É—é
- –ü–æ–≤—Ç–æ—Ä–∏—Ç—å –ø–æ–ø—ã—Ç–∫—É
- –£–≤–µ–¥–æ–º–∏—Ç—å –≤ Telegram –æ —Å–º–µ–Ω–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ö–ª—é—á–µ–≤—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è browser context –∏–∑ GitHub:

```python
# –û—Å–Ω–æ–≤–Ω–æ–µ –æ—Ç–ª–∏—á–∏–µ - –ø—Ä–æ—Å—Ç–æ—Ç–∞:
context = browser.new_context(
    viewport={'width': 1920, 'height': 1080},
    user_agent='Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36',
    java_script_enabled=True,        # ‚Üê –í–∞–∂–Ω–æ!
    ignore_https_errors=True          # ‚Üê –í–∞–∂–Ω–æ!
)

# –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π stealth:
context.add_init_script("""
    Object.defineProperty(navigator, 'webdriver', {
        get: () => undefined
    });
    Object.defineProperty(navigator, 'plugins', {
        get: () => [1, 2, 3, 4, 5]
    });
""")
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏:

```python
def check_blocking(page):
    title = page.title()
    content = page.content()
    
    # –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏:
    if "–î–æ—Å—Ç—É–ø –æ–≥—Ä–∞–Ω–∏—á–µ–Ω" in content:
        return True, "–î–æ—Å—Ç—É–ø –æ–≥—Ä–∞–Ω–∏—á–µ–Ω"
    if "Access Denied" in content:
        return True, "Access Denied"
    if "–ü—Ä–æ–≤–µ—Ä–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏" in content:
        return True, "Security check"
    if "captcha" in content.lower():
        return True, "CAPTCHA"
    if "Ozon" not in title:
        return True, f"–ù–µ–æ–∂–∏–¥–∞–Ω–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞: {title}"
    
    return False, "OK"
```

### –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–∫—Ä–∏–Ω—à–æ—Ç–∞ –≤ Telegram:

```python
async def send_test_result(update, strategy_num, strategy_name, 
                           screenshot_bytes, is_blocked, message):
    caption = f"üß™ –¢–µ—Å—Ç #{strategy_num}: {strategy_name}\n\n"
    if is_blocked:
        caption += f"‚ùå {message}"
    else:
        caption += f"‚úÖ {message}"
    
    await update.message.reply_photo(
        photo=screenshot_bytes,
        caption=caption
    )
```

## üìä –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ `/test_antidetect` –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ª—É—á–∏—Ç:
- 7 —Å–∫—Ä–∏–Ω—à–æ—Ç–æ–≤ —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ —Ç–µ—Å—Ç–æ–≤
- –°—Ç–∞—Ç—É—Å –∫–∞–∂–¥–æ–π —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ (—Ä–∞–±–æ—Ç–∞–µ—Ç/–∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞)
- –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—é –∫–∞–∫—É—é —Å—Ç—Ä–∞—Ç–µ–≥–∏—é –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

## üöÄ –≠—Ç–∞–ø—ã —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

1. ‚úÖ –ò–∑—É—á–∏—Ç—å GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π aglihowstan/parser_ozon
2. ‚è≥ –°–æ–∑–¥–∞—Ç—å `antidetect_strategies.py` —Å 7 —Å—Ç—Ä–∞—Ç–µ–≥–∏—è–º–∏ (sync API)
3. ‚è≥ –î–æ–±–∞–≤–∏—Ç—å `/test_antidetect` –∫–æ–º–∞–Ω–¥—É –≤ `telegram_bot.py`
4. ‚è≥ –î–æ–±–∞–≤–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏—é —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏
5. ‚è≥ –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å –æ—Å–Ω–æ–≤–Ω—ã–º –ø–∞—Ä—Å–µ—Ä–æ–º —á–µ—Ä–µ–∑ config
6. ‚è≥ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
7. ‚è≥ –í—ã–±—Ä–∞—Ç—å –ª—É—á—à—É—é —Å—Ç—Ä–∞—Ç–µ–≥–∏—é
8. ‚è≥ –û–±–Ω–æ–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é

## üé® UX –≤ Telegram

```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: /test_antidetect

–ë–æ—Ç: üß™ –ó–∞–ø—É—Å–∫–∞—é —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–Ω—Ç–∏–¥–µ—Ç–µ–∫—Ç —Å—Ç—Ä–∞—Ç–µ–≥–∏–π...
     –≠—Ç–æ –∑–∞–π–º–µ—Ç 1-2 –º–∏–Ω—É—Ç—ã.

[–°–∫—Ä–∏–Ω—à–æ—Ç 1]
üß™ –¢–µ—Å—Ç #1: Basic Stealth
‚ùå –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞: "–î–æ—Å—Ç—É–ø –æ–≥—Ä–∞–Ω–∏—á–µ–Ω"

[–°–∫—Ä–∏–Ω—à–æ—Ç 2]
üß™ –¢–µ—Å—Ç #2: GitHub Parser  
‚úÖ –£—Å–ø–µ—Ö! Title: Ozon ‚Äî –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞–≥–∞–∑–∏–Ω

[–°–∫—Ä–∏–Ω—à–æ—Ç 3]
üß™ –¢–µ—Å—Ç #3: Full Stealth
‚ùå –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞: "Security check"

...

–ë–æ—Ç: ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ!
     
     –†–µ–∑—É–ª—å—Ç–∞—Ç—ã:
     ‚ùå Basic Stealth - –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω
     ‚úÖ GitHub Parser - —Ä–∞–±–æ—Ç–∞–µ—Ç ‚Üê –†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø
     ‚ùå Full Stealth - –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω
     ‚ùå Random Fingerprint - –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω
     ‚ùå Mobile Emulation - –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω
     ‚úÖ Extended Headers - —Ä–∞–±–æ—Ç–∞–µ—Ç
     ‚ùå Canvas Protection - –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω
     
     üí° –†–µ–∫–æ–º–µ–Ω–¥—É—é –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—Ç—Ä–∞—Ç–µ–≥–∏—é #2: GitHub Parser
     –ö–æ–º–∞–Ω–¥–∞ –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è: /use_strategy 2
```

## üìù –§–∞–π–ª—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è/–∏–∑–º–µ–Ω–µ–Ω–∏—è

1. **antidetect_strategies.py** (–Ω–æ–≤—ã–π) - 7 –∫–ª–∞—Å—Å–æ–≤ —Å—Ç—Ä–∞—Ç–µ–≥–∏–π + —Ç–µ—Å—Ç–µ—Ä
2. **telegram_bot.py** - –¥–æ–±–∞–≤–∏—Ç—å –∫–æ–º–∞–Ω–¥—É `/test_antidetect`
3. **session_manager.py** - –¥–æ–±–∞–≤–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä –≤—ã–±–æ—Ä–∞ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏
4. **config.py** - –¥–æ–±–∞–≤–∏—Ç—å DEFAULT_STRATEGY = 2
5. **ANTIDETECT_TESTING.md** (–Ω–æ–≤—ã–π) - –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

## üîç –°–ª–µ–¥—É—é—â–∏–π —à–∞–≥

–°–æ–∑–¥–∞—Ç—å —É–ø—Ä–æ—â–µ–Ω–Ω—ã–π `antidetect_strategies.py` —Å sync API –∏ –±–∞–∑–æ–≤—ã–º–∏ —Å—Ç—Ä–∞—Ç–µ–≥–∏—è–º–∏.
