# üöÄ –†–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ Ozon Parser –Ω–∞ Timeweb

–ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏—é –ø–∞—Ä—Å–µ—Ä–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ Timeweb —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –∑–∞–ø—É—Å–∫–æ–º –∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –≤—ã–∑–æ–≤–∞ —á–µ—Ä–µ–∑ Google Apps Script.

---

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è](#—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è)
2. [–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ Timeweb](#–ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞-—Å–µ—Ä–≤–µ—Ä–∞-timeweb)
3. [–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞](#—É—Å—Ç–∞–Ω–æ–≤–∫–∞-–ø—Ä–æ–µ–∫—Ç–∞)
4. [–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∑–∞–ø—É—Å–∫–∞](#–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ-–∑–∞–ø—É—Å–∫–∞)
5. [–ù–∞—Å—Ç—Ä–æ–π–∫–∞ API –¥–ª—è App Script](#–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-api-–¥–ª—è-app-script)
6. [–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Google Sheets](#–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è-—Å-google-sheets)
7. [–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ](#–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥-–∏-–æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ)
8. [Troubleshooting](#troubleshooting)

---

## üîß –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

### –ù–∞ —Å—Ç–æ—Ä–æ–Ω–µ Timeweb:
- **VPS**: –º–∏–Ω–∏–º—É–º 2 –ì–ë RAM, 2 CPU
- **–û–°**: Ubuntu 20.04/22.04 LTS –∏–ª–∏ Debian 11/12
- **–î–∏—Å–∫**: –º–∏–Ω–∏–º—É–º 10 –ì–ë —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –º–µ—Å—Ç–∞
- **SSH –¥–æ—Å—Ç—É–ø**: —Å –ø—Ä–∞–≤–∞–º–∏ sudo

### –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–∞—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞:
- Telegram Bot Token (–æ—Ç @BotFather)
- Google Sheets API credentials (google_credentials.json)
- –î–∞–Ω–Ω—ã–µ –¥–ª—è –≤—Ö–æ–¥–∞ –≤ Ozon

---

## üñ•Ô∏è –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ Timeweb

### 1. –ó–∞–∫–∞–∑ VPS –Ω–∞ Timeweb

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ [timeweb.cloud](https://timeweb.cloud/)
2. –í—ã–±–µ—Ä–∏—Ç–µ "Cloud —Å–µ—Ä–≤–µ—Ä—ã" ‚Üí "–°–æ–∑–¥–∞—Ç—å —Å–µ—Ä–≤–µ—Ä"
3. –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:
   - **–û–°**: Ubuntu 22.04 LTS
   - **RAM**: 2 –ì–ë (–º–∏–Ω–∏–º—É–º)
   - **CPU**: 2 —è–¥—Ä–∞
   - **–î–∏—Å–∫**: 20 –ì–ë SSD
   - **–†–µ–≥–∏–æ–Ω**: –ú–æ—Å–∫–≤–∞ (–¥–ª—è –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–π –∑–∞–¥–µ—Ä–∂–∫–∏)

4. –î–æ–∂–¥–∏—Ç–µ—Å—å —Å–æ–∑–¥–∞–Ω–∏—è —Å–µ—Ä–≤–µ—Ä–∞ –∏ –ø–æ–ª—É—á–∏—Ç–µ:
   - IP-–∞–¥—Ä–µ—Å —Å–µ—Ä–≤–µ—Ä–∞
   - –ü–∞—Ä–æ–ª—å root (–ø—Ä–∏–¥—ë—Ç –Ω–∞ email)

### 2. –ü–µ—Ä–≤–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ä–≤–µ—Ä—É

```bash
# –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –ø–æ SSH (–∑–∞–º–µ–Ω–∏—Ç–µ YOUR_SERVER_IP –Ω–∞ –≤–∞—à IP)
ssh root@YOUR_SERVER_IP

# –ü—Ä–∏ –ø–µ—Ä–≤–æ–º –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ —Å–æ–≥–ª–∞—Å–∏—Ç–µ—Å—å –¥–æ–±–∞–≤–∏—Ç—å —Å–µ—Ä–≤–µ—Ä –≤ known_hosts (yes)
```

### 3. –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
# –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è ozon
adduser ozon

# –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –≥—Ä—É–ø–ø—É sudo
usermod -aG sudo ozon

# –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
su - ozon
```

**–í–∞–∂–Ω–æ**: –í—Å–µ –¥–∞–ª—å–Ω–µ–π—à–∏–µ –¥–µ–π—Å—Ç–≤–∏—è –≤—ã–ø–æ–ª–Ω—è–µ–º –æ—Ç –∏–º–µ–Ω–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è `ozon` (–Ω–µ root)!

---

## üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞

### 1. –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ –Ω–∞ —Å–µ—Ä–≤–µ—Ä

#### –í–∞—Ä–∏–∞–Ω—Ç –ê: –ß–µ—Ä–µ–∑ Git (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ
cd ~
git clone https://github.com/YOUR_USERNAME/YOUR_REPO.git ozon_parser
cd ozon_parser
```

#### –í–∞—Ä–∏–∞–Ω—Ç –ë: –ß–µ—Ä–µ–∑ SCP (—Å –≤–∞—à–µ–≥–æ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞)

```powershell
# –ù–∞ –≤–∞—à–µ–º Windows –∫–æ–º–ø—å—é—Ç–µ—Ä–µ (PowerShell)
cd "C:\Users\—Ñ—Ñ\Documents\Apps\Ozon_Parser"

# –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö —Ñ–∞–π–ª–æ–≤ –Ω–∞ —Å–µ—Ä–≤–µ—Ä
scp -r * ozon@YOUR_SERVER_IP:~/ozon_parser/
```

### 2. –ó–∞–ø—É—Å–∫ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —É—Å—Ç–∞–Ω–æ–≤–∫–∏

```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ
cd ~/ozon_parser
chmod +x deploy.sh
bash deploy.sh
```

–°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç:
- ‚úÖ Python 3 –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- ‚úÖ Playwright –∏ –±—Ä–∞—É–∑–µ—Ä—ã
- ‚úÖ Nginx, Supervisor
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫—É —á–∞—Å–æ–≤–æ–≥–æ –ø–æ—è—Å–∞ (–ú–°–ö)
- ‚úÖ –°–æ–∑–¥–∞—Å—Ç –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
- ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–∏—Ç –≤—Å–µ Python –ø–∞–∫–µ—Ç—ã

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
# –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ .env —Ñ–∞–π–ª–∞
nano ~/ozon_parser/.env
```

–ó–∞–º–µ–Ω–∏—Ç–µ –∑–Ω–∞—á–µ–Ω–∏—è –Ω–∞ —Å–≤–æ–∏:

```env
# API Secret Key (–ù–ï –ú–ï–ù–Ø–ô–¢–ï - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω)
API_SECRET_KEY=–≤–∞—à_–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏_—Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π_–∫–ª—é—á

# Telegram Bot
TELEGRAM_BOT_TOKEN=123456789:ABCdefGHIjklMNOpqrsTUVwxyz
TELEGRAM_CHAT_ID=987654321

# Google Sheets
GOOGLE_CREDENTIALS_FILE=google_credentials.json
GOOGLE_SHEETS_URL=https://docs.google.com/spreadsheets/d/YOUR_SHEET_ID/edit

# Ozon credentials
OZON_EMAIL=your_email@example.com
OZON_PASSWORD=your_secure_password
```

**–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ**: `Ctrl+O` ‚Üí `Enter` ‚Üí `Ctrl+X`

### 4. –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ Google Credentials

```bash
# –ù–∞ –≤–∞—à–µ–º Windows –∫–æ–º–ø—å—é—Ç–µ—Ä–µ
scp google_credentials.json ozon@YOUR_SERVER_IP:~/ozon_parser/

# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ - –ø—Ä–æ–≤–µ—Ä–∫–∞
ls -la ~/ozon_parser/google_credentials.json
```

---

## ‚è∞ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∑–∞–ø—É—Å–∫–∞

### 1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ API —Å–µ—Ä–≤–µ—Ä–∞ (systemd)

API —Å–µ—Ä–≤–µ—Ä –±—É–¥–µ—Ç –ø–æ—Å—Ç–æ—è–Ω–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å –∏ –ø—Ä–∏–Ω–∏–º–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã –Ω–∞ –∑–∞–ø—É—Å–∫ –ø–∞—Ä—Å–µ—Ä–∞.

```bash
cd ~/ozon_parser
chmod +x setup-systemd.sh
bash setup-systemd.sh
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã**:

```bash
# –°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–∞
sudo systemctl status ozon-parser-api

# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: Active: active (running)

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ API
curl http://localhost:8000/
# –û—Ç–≤–µ—Ç: {"service":"Ozon Parser API","version":"1.0.0",...}
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è (cron)

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫ –ø–∞—Ä—Å–µ—Ä–∞ –∫–∞–∂–¥—ã–π —á–∞—Å —Å 9:00 –¥–æ 21:00 –ø–æ –ú–æ—Å–∫–≤–µ.

```bash
cd ~/ozon_parser
chmod +x setup-cron.sh
bash setup-cron.sh
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è**:

```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä crontab
crontab -l

# –î–æ–ª–∂–Ω–∞ –±—ã—Ç—å —Å—Ç—Ä–æ–∫–∞:
# 0 9-21 * * * /home/ozon/ozon_parser/run_parser.sh
```

**–õ–æ–≥–∏ cron**:

```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
tail -f ~/ozon_parser/logs/cron_$(date +%Y%m%d).log
```

---

## üåê –ù–∞—Å—Ç—Ä–æ–π–∫–∞ API –¥–ª—è App Script

### 1. –ü–æ–ª—É—á–µ–Ω–∏–µ API –∫–ª—é—á–∞

```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä –≤–∞—à–µ–≥–æ —Å–µ–∫—Ä–µ—Ç–Ω–æ–≥–æ –∫–ª—é—á–∞
cat ~/ozon_parser/.env | grep API_SECRET_KEY

# –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∑–Ω–∞—á–µ–Ω–∏–µ - –æ–Ω–æ –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –¥–ª—è App Script
```

### 2. –û—Ç–∫—Ä—ã—Ç–∏–µ –ø–æ—Ä—Ç–∞ 8000 (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è firewall)

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ firewall
sudo ufw status

# –ï—Å–ª–∏ –∞–∫—Ç–∏–≤–µ–Ω - –æ—Ç–∫—Ä—ã–≤–∞–µ–º –ø–æ—Ä—Ç
sudo ufw allow 8000/tcp
sudo ufw reload
```

### 3. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API

```bash
# –õ–æ–∫–∞–ª—å–Ω—ã–π —Ç–µ—Å—Ç
curl http://localhost:8000/health

# –¢–µ—Å—Ç —Å –¥—Ä—É–≥–æ–≥–æ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞ (–∑–∞–º–µ–Ω–∏—Ç–µ YOUR_SERVER_IP)
curl http://YOUR_SERVER_IP:8000/health
```

**–í–∞–∂–Ω–æ**: –î–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω–∞ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å:
- ‚úÖ Nginx reverse proxy
- ‚úÖ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç (Let's Encrypt)
- ‚úÖ –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–∞ –ø–æ IP

---

## üìä –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Google Sheets

### 1. –û—Ç–∫—Ä—ã—Ç–∏–µ Apps Script

1. –û—Ç–∫—Ä–æ–π—Ç–µ –≤–∞—à—É Google –¢–∞–±–ª–∏—Ü—É
2. –ú–µ–Ω—é: **–†–∞—Å—à–∏—Ä–µ–Ω–∏—è** ‚Üí **Apps Script**
3. –£–¥–∞–ª–∏—Ç–µ –≤–µ—Å—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥

### 2. –í—Å—Ç–∞–≤–∫–∞ –∫–æ–¥–∞

1. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞ `google-apps-script.js`
2. –í—Å—Ç–∞–≤—å—Ç–µ –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä Apps Script
3. –ò–∑–º–µ–Ω–∏—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ –Ω–∞—á–∞–ª–µ —Ñ–∞–π–ª–∞:

```javascript
// URL –≤–∞—à–µ–≥–æ API —Å–µ—Ä–≤–µ—Ä–∞ –Ω–∞ Timeweb
const API_BASE_URL = 'http://YOUR_SERVER_IP:8000';

// API —Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á (–∏–∑ .env —Ñ–∞–π–ª–∞)
const API_SECRET_KEY = '–≤–∞—à_—Å–µ–∫—Ä–µ—Ç–Ω—ã–π_–∫–ª—é—á_–∏–∑_env';
```

4. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ: `Ctrl+S` –∏–ª–∏ –∏–∫–æ–Ω–∫–∞ –¥–∏—Å–∫–µ—Ç—ã

### 3. –†–∞–∑—Ä–µ—à–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–∞

1. –ù–∞–∂–º–∏—Ç–µ **‚ñ∂Ô∏è –í—ã–ø–æ–ª–Ω–∏—Ç—å** (–ª—é–±—É—é —Ñ—É–Ω–∫—Ü–∏—é)
2. Google –ø–æ–ø—Ä–æ—Å–∏—Ç —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ - –Ω–∞–∂–º–∏—Ç–µ **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è**
3. –í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à –∞–∫–∫–∞—É–Ω—Ç Google
4. –ù–∞–∂–º–∏—Ç–µ **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ** ‚Üí **–ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É...**
5. –†–∞–∑—Ä–µ—à–∏—Ç–µ –¥–æ—Å—Ç—É–ø

### 4. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –º–µ–Ω—é

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ Google Sheets –ø–æ—è–≤–∏—Ç—Å—è –º–µ–Ω—é **ü§ñ Ozon Parser**:

- **‚ñ∂Ô∏è –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø–∞—Ä—Å–∏–Ω–≥** - –∑–∞–ø—É—Å–∫ –ø–∞—Ä—Å–µ—Ä–∞ –≤—Ä—É—á–Ω—É—é
- **üìä –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å** - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ–∫—É—â–µ–≥–æ —Å—Ç–∞—Ç—É—Å–∞
- **üìã –ü–æ–∫–∞–∑–∞—Ç—å –ª–æ–≥–∏** - –ø—Ä–æ—Å–º–æ—Ç—Ä –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –ª–æ–≥–æ–≤
- **‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏ API** - –ø—Ä–æ—Å–º–æ—Ç—Ä –Ω–∞—Å—Ç—Ä–æ–µ–∫

### 5. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ —Ç—Ä–∏–≥–≥–µ—Ä—ã (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

1. –í Apps Script: **–¢—Ä–∏–≥–≥–µ—Ä—ã** (–∏–∫–æ–Ω–∫–∞ –±—É–¥–∏–ª—å–Ω–∏–∫–∞ —Å–ª–µ–≤–∞)
2. **+ –î–æ–±–∞–≤–∏—Ç—å —Ç—Ä–∏–≥–≥–µ—Ä**
3. –ù–∞—Å—Ç—Ä–æ–π–∫–∏:
   - –§—É–Ω–∫—Ü–∏—è: `scheduledTrigger`
   - –ò—Å—Ç–æ—á–Ω–∏–∫ —Å–æ–±—ã—Ç–∏—è: **–ü–æ –≤—Ä–µ–º–µ–Ω–∏**
   - –¢–∏–ø —Ç—Ä–∏–≥–≥–µ—Ä–∞: **–¢–∞–π–º–µ—Ä –Ω–∞ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–π —á–∞—Å**
   - –í—ã–±–µ—Ä–∏—Ç–µ —á–∞—Å—ã: 9, 10, 11, ..., 21 (–ø–æ –æ–¥–Ω–æ–º—É —Ç—Ä–∏–≥–≥–µ—Ä—É –Ω–∞ –∫–∞–∂–¥—ã–π —á–∞—Å)
4. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ

---

## üîç –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ —Å–µ—Ä–≤–∏—Å–æ–≤

```bash
# –°—Ç–∞—Ç—É—Å API —Å–µ—Ä–≤–µ—Ä–∞
sudo systemctl status ozon-parser-api

# –õ–æ–≥–∏ API —Å–µ—Ä–≤–µ—Ä–∞ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
sudo journalctl -u ozon-parser-api -f

# –õ–æ–≥–∏ –ø–∞—Ä—Å–µ—Ä–∞
tail -f ~/ozon_parser/logs/parser_*.log

# –õ–æ–≥–∏ cron
tail -f ~/ozon_parser/logs/cron_*.log
```

### –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–æ–≤

```bash
# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ API —Å–µ—Ä–≤–µ—Ä–∞
sudo systemctl restart ozon-parser-api

# –†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫ –ø–∞—Ä—Å–µ—Ä–∞
cd ~/ozon_parser
source venv/bin/activate
python main.py
```

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–¥–∞

```bash
cd ~/ozon_parser

# –ß–µ—Ä–µ–∑ Git
git pull origin master

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ API —Å–µ—Ä–≤–µ—Ä–∞ –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
sudo systemctl restart ozon-parser-api
```

### –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –°–æ–∑–¥–∞–Ω–∏–µ –±—ç–∫–∞–ø–∞
tar -czf ~/ozon_parser_backup_$(date +%Y%m%d).tar.gz \
    ~/ozon_parser/.env \
    ~/ozon_parser/google_credentials.json \
    ~/ozon_parser/*.json \
    ~/ozon_parser/logs/

# –°–∫–∞—á–∏–≤–∞–Ω–∏–µ –±—ç–∫–∞–ø–∞ –Ω–∞ –ª–æ–∫–∞–ª—å–Ω—ã–π –∫–æ–º–ø—å—é—Ç–µ—Ä
scp ozon@YOUR_SERVER_IP:~/ozon_parser_backup_*.tar.gz ./
```

---

## üêõ Troubleshooting

### –ü—Ä–æ–±–ª–µ–º–∞: API —Å–µ—Ä–≤–µ—Ä –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤
sudo journalctl -u ozon-parser-api -n 50

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–Ω—è—Ç–æ—Å—Ç–∏ –ø–æ—Ä—Ç–∞
sudo netstat -tulpn | grep 8000

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
sudo systemctl show ozon-parser-api | grep Environment
```

### –ü—Ä–æ–±–ª–µ–º–∞: –ü–∞—Ä—Å–µ—Ä –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ cron

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –Ω–∞ —Å–∫—Ä–∏–ø—Ç
ls -la ~/ozon_parser/run_parser.sh

# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: -rwxr-xr-x

# –†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫ —Å–∫—Ä–∏–ø—Ç–∞ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏
bash ~/ozon_parser/run_parser.sh

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤ cron
grep CRON /var/log/syslog
```

### –ü—Ä–æ–±–ª–µ–º–∞: Playwright –Ω–µ –º–æ–∂–µ—Ç –∑–∞–ø—É—Å—Ç–∏—Ç—å –±—Ä–∞—É–∑–µ—Ä

```bash
# –ü–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∫–∞ –±—Ä–∞—É–∑–µ—Ä–æ–≤ Playwright
cd ~/ozon_parser
source venv/bin/activate
playwright install chromium
playwright install-deps chromium
```

### –ü—Ä–æ–±–ª–µ–º–∞: Google Apps Script –Ω–µ –º–æ–∂–µ—Ç –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, –æ—Ç–∫—Ä—ã—Ç –ª–∏ –ø–æ—Ä—Ç 8000:
   ```bash
   sudo ufw status
   sudo ufw allow 8000/tcp
   ```

2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ API –∫–ª—é—á –≤ Apps Script —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å .env

3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤–Ω–µ—à–Ω–∏–π IP (–Ω–µ localhost) –≤ `API_BASE_URL`

### –ü—Ä–æ–±–ª–µ–º–∞: Timezone –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ–∫—É—â–µ–≥–æ –≤—Ä–µ–º–µ–Ω–∏
date

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ timezone –Ω–∞ –ú–°–ö
sudo timedatectl set-timezone Europe/Moscow

# –ü—Ä–æ–≤–µ—Ä–∫–∞
timedatectl
```

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

1. **–°–º–µ–Ω–∏—Ç–µ SSH –ø–æ—Ä—Ç**:
   ```bash
   sudo nano /etc/ssh/sshd_config
   # –ò–∑–º–µ–Ω–∏—Ç–µ Port 22 –Ω–∞ Port 2222
   sudo systemctl restart sshd
   ```

2. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ firewall**:
   ```bash
   sudo ufw default deny incoming
   sudo ufw default allow outgoing
   sudo ufw allow 2222/tcp  # SSH
   sudo ufw allow 8000/tcp  # API
   sudo ufw enable
   ```

3. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ SSH –∫–ª—é—á–∏** –≤–º–µ—Å—Ç–æ –ø–∞—Ä–æ–ª–µ–π

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

1. **–û–≥—Ä–∞–Ω–∏—á—å—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∑–∞–ø—É—Å–∫–æ–≤** –≤ cron
2. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ —Ä–æ—Ç–∞—Ü–∏—é –ª–æ–≥–æ–≤**:
   ```bash
   # –°–æ–∑–¥–∞—Ç—å /etc/logrotate.d/ozon-parser
   sudo nano /etc/logrotate.d/ozon-parser
   ```

   –°–æ–¥–µ—Ä–∂–∏–º–æ–µ:
   ```
   /home/ozon/ozon_parser/logs/*.log {
       daily
       rotate 7
       compress
       missingok
       notifempty
   }
   ```

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

–ù–∞—Å—Ç—Ä–æ–π—Ç–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ —Å–±–æ—è—Ö —á–µ—Ä–µ–∑ Telegram:
- –î–æ–±–∞–≤—å—Ç–µ –≤ cron —Å–∫—Ä–∏–ø—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ç–∞—Ç—É—Å–∞ API
- –û—Ç–ø—Ä–∞–≤–ª—è–π—Ç–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö

---

## üéØ –ò—Ç–æ–≥–æ–≤–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞

–ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –≤—Å–µ—Ö —à–∞–≥–æ–≤ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:

- [ ] API —Å–µ—Ä–≤–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç: `curl http://YOUR_SERVER_IP:8000/health`
- [ ] Cron –Ω–∞—Å—Ç—Ä–æ–µ–Ω: `crontab -l`
- [ ] Systemd —Å–µ—Ä–≤–∏—Å –∞–∫—Ç–∏–≤–µ–Ω: `sudo systemctl status ozon-parser-api`
- [ ] Timezone = Europe/Moscow: `timedatectl`
- [ ] Google Apps Script –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ API
- [ ] –ú–µ–Ω—é –ø–æ—è–≤–∏–ª–æ—Å—å –≤ Google Sheets
- [ ] –¢–µ—Å—Ç–æ–≤—ã–π –∑–∞–ø—É—Å–∫ –ø–∞—Ä—Å–µ—Ä–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç

---

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ (—Å–º. —Ä–∞–∑–¥–µ–ª "–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥")
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –∑–∞–ø–æ–ª–Ω–µ–Ω—ã
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–µ—Ç–µ–≤–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∏ firewall
4. –°–æ–∑–¥–∞–π—Ç–µ issue –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ GitHub

---

**–í–µ—Ä—Å–∏—è**: 1.0.0  
**–î–∞—Ç–∞**: 26 –æ–∫—Ç—è–±—Ä—è 2025  
**–ê–≤—Ç–æ—Ä**: Ozon Parser Team
